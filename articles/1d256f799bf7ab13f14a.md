---
title: "Goã§ã‚­ãƒ¼ãŒä¸å®šã®jsonã‚’æ‰±ã†"
emoji: "ğŸ™"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["Go"]
published: true
---
Goã§jsonã‚’æ‰±ã†æ™‚ã«èª¿æŸ»ã—ãŸã“ã¨ã®ãƒ¡ãƒ¢ã€‚

## jsonã®ã‚­ãƒ¼ãŒå›ºå®šã®ã¨ã
å–å¾—ã™ã‚‹jsonã®ã‚­ãƒ¼ãŒã‚ã‹ã£ã¦ã„ã‚‹æ™‚ã¯æ§‹é€ ä½“ã‚’ç”¨æ„ã—ã¦ã€json.Unmarshalã‚’ä½¿ç”¨ã™ã‚‹ã®ãŒçµæœã‚‚æ‰±ã„ã‚„ã™ãã‚ˆãåˆ©ç”¨ã—ã¾ã™ã€‚

```json:users.json
[
  {
    "id": 1,
    "name": "Tanaka",
    "age": 20
  },
  {
    "id": 2,
    "name": "Yamada",
    "age": 23
  }
]
```

```go:main.go
package main

import (
	"encoding/json"
	"fmt"
	"io/ioutil"
	"log"
)

type User struct {
	Id   int    `json:"id"`
	Name string `json:"name"`
	Age  int    `json:"age"`
}

func main() {
	bytes, err := ioutil.ReadFile("users.json")
	if err != nil {
		log.Fatal(err)
	}

	var users []User
	if err := json.Unmarshal(bytes, &users); err != nil {
		log.Fatal(err)
	}

	fmt.Printf("%v\n", users)
}
```

## ã‚­ãƒ¼ãŒä¸å®šã®ã¨ã
äº‹å‰ã«ã‚­ãƒ¼ãŒåˆ†ã‹ã‚‰ãªã„å ´åˆã¯ä¸Šè¨˜ã®æ–¹æ³•ã ã¨å¯¾å¿œãŒé›£ã—ã„å ´åˆãŒã‚ã‚Šã¾ã™ã€‚ï¼ˆä»Šå›ã®ä¾‹ã ã¨scoreï¼‰ã€‚
ãã†ã„ã†ã¨ãã¯ã€mapã§å¯¾å¿œã™ã‚‹ã€‚
`[]map[string]interface{}`ã‚’ç”¨æ„ã—ã¦`json.Unmarshal`ã«æ¸¡ã™ã€‚ãã†ã™ã‚‹ã“ã¨ã§çµæœã®ã‚ˆã†ãªmapã«ãªã‚‹ã€‚
```json:users.json
[
  {
    "id": 1,
    "name": "Tanaka",
    "age": 20,
    "score": {
      "2021_01": 40,
      "2021_03": 50
    }
  },
  {
    "id": 2,
    "name": "Yamada",
    "age": 23,
    "score": {
      "2020_01": 40,
      "2021_06": 90
    }
  }
]
```

```go:main.go
package main

import (
	"encoding/json"
	"fmt"
	"io/ioutil"
	"log"
)

func main() {
	bytes, err := ioutil.ReadFile("users.json")
	if err != nil {
		log.Fatal(err)
	}

	var result []map[string]interface{}
	json.Unmarshal(bytes, &result)
	fmt.Printf("%v\n", result)
}
```
### çµæœ
```go
[map[age:20 id:1 name:Tanaka score:map[2021_01:40 2021_03:50]] map[age:23 id:2 name:Yamada score:map[2020_01:40 2021_06:90]]]
```
