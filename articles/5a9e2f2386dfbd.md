---
title: "go tools"
emoji: "😺"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["Go"]
published: false
---
## [gotests](https://github.com/cweill/gotests)
  - 既存のコードに対してGoテストの雛形を作成できます。
```go
package main

func fullName(firstName, lastName string) string {
    return firstName + lastName
}
```
コマンド
```bash
gotests -all -w main.go
```
こんなの作ってくれるよ
```go
func Test_fullName(t *testing.T) {
	type args struct {
		firstName string
		lastName  string
	}
	tests := []struct {
		name string
		args args
		want string
	}{
		// TODO: Add test cases.
	}
	for _, tt := range tests {
		t.Run(tt.name, func(t *testing.T) {
			if got := fullName(tt.args.firstName, tt.args.lastName); got != tt.want {
				t.Errorf("fullName() = %v, want %v", got, tt.want)
			}
		})
	}
}
```
## [gomodifytags](https://github.com/fatih/gomodifytags)
構造体フィールドのタグを更新、追加、削除できます。
こんな構造体がある
```go
package main

type User struct {
	Id   int    `json:"id"`
	Name string `json:"name"`
	Age  int    `json:"age"`
}
```
```bash
gomodifytags -file main.go -struct User -add-tags json -w
```

## [impl](https://github.com/josharian/impl)
インターフェイスを実装するためのメソッドスタブを生成します。
```bash
impl 'h *Hoge' error
```

```go
func (h *Hoge) Error() string {
        panic("not implemented") // TODO: Implement
}
```

## [goplay](https://github.com/haya14busa/goplay)
指定したファイルを[The Go Playground](https://play.golang.org/)で動かせるようにする。
```bash
goplay main.go
```

## [dlv](https://github.com/go-delve/delve)
Goのデバッガーツール
```
dlv debug main.go
```
```bash
Type 'help' for list of commands.
(dlv)
```

```bash
(dlv) b main.main
Breakpoint 1 set at 0x10cdc78 for main.main() ./main.go:13
```

```bash
(dlv) continue
> main.main() ./main.go:13 (hits goroutine(1):1 total:1) (PC: 0x10cdc78)
     8:		Id   int    `json:"id"`
     9:		Name string `json:"name"`
    10:		Age  int    `json:"age"`
    11:	}
    12:
=>  13:	func main() {
    14:		var user User
    15:		user.Id = 1
    16:		user.Name = "Bob"
    17:		user.Age = 20
    18:
```

```bash
(dlv) next
> main.main() ./main.go:14 (PC: 0x10cdc8f)
     9:		Name string `json:"name"`
    10:		Age  int    `json:"age"`
    11:	}
    12:
    13:	func main() {
=>  14:		var user User
    15:		user.Id = 1
    16:		user.Name = "Bob"
    17:		user.Age = 20
    18:
    19:		var a string
```

## [goimports](https://github.com/golang/tools/tree/master/cmd/goimports)
インポートが不足しているものを追加し、参照されていないものを削除してくれる。コードのフォーマットもしてくれる。
```go
package main

import "log"

func main() {
	fmt.Println("hello")
}
```

```
goimports -w -l main.go
```

```go
package main

import "fmt"

func main() {
        fmt.Println("hello")
}
```
